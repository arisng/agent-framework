# AG-UI Feature Breakdown (AGUIWebChat)

## Overview
This document maps the seven AG-UI protocol features to the AGUIWebChat sample. The sample focuses on streaming chat plus Agentic UI state updates (plan snapshots and JSON Patch deltas) and documents where each feature is implemented or intentionally omitted.
For the per-feature implementation roadmap and manual UI checks, see [dotnet/samples/AGUIWebChat/.docs/ag-ui-feature-iteration-plan.md](dotnet/samples/AGUIWebChat/.docs/ag-ui-feature-iteration-plan.md).

## Feature Summary

| AG-UI Feature            | AG-UI Intent                                                                  | AGUIWebChat Coverage                                                                                                                     | Primary Files                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------ | ----------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Agentic Chat             | Stream assistant responses with tool calling and thread management.           | Implemented via AG-UI endpoint and streaming chat UI. The client streams responses and tracks the conversation ID.                       | [dotnet/samples/AGUIWebChat/Server/Program.cs](dotnet/samples/AGUIWebChat/Server/Program.cs), [dotnet/samples/AGUIWebChat/Client/Program.cs](dotnet/samples/AGUIWebChat/Client/Program.cs), [dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/Chat.razor](dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/Chat.razor)                                                                                                       |
| Backend Tool Rendering   | Execute tools on the server and stream results to the client.                 | Implemented through plan tools on the server. Tool results are converted to state events and sent to the client.                         | [dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticPlanningTools.cs](dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticPlanningTools.cs), [dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticUIAgent.cs](dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticUIAgent.cs), [dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/ChatMessageItem.razor](dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/ChatMessageItem.razor) |
| Human in the Loop        | Require user approval before executing sensitive tools.                       | Not implemented in this sample. There are no approval-required tools or confirmation middleware.                                         | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Agentic Generative UI    | Use async tools and streamed updates to drive UI state changes.               | Partially demonstrated. The plan update tool is async and produces state updates that the UI renders as state events.                    | [dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticPlanningTools.cs](dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticPlanningTools.cs), [dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticUIAgent.cs](dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticUIAgent.cs), [dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/ChatMessageItem.razor](dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/ChatMessageItem.razor) |
| Tool-based Generative UI | Render custom UI components based on tool calls.                              | Not implemented. The sample renders state updates as JSON text rather than custom UI components.                                         | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Shared State             | Synchronize state between client and server via state events.                 | Implemented as server-to-client state snapshots and JSON Patch deltas for the planning state. Client-side state mutation is not present. | [dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticUIAgent.cs](dotnet/samples/AGUIWebChat/Server/AgenticUI/AgenticUIAgent.cs), [dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/ChatMessageItem.razor](dotnet/samples/AGUIWebChat/Client/Components/Pages/Chat/ChatMessageItem.razor)                                                                                                                                             |
| Predictive State Updates | Stream tool arguments as optimistic state updates before execution completes. | Not implemented. State updates are emitted after tool execution finishes.                                                                | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                        |

## Implementation Notes

### Agentic Chat
- The server exposes an AG-UI endpoint using `MapAGUI`, and the client uses `AGUIChatClient` to stream responses.
- The chat UI tracks conversation continuity via `ConversationId` and appends streaming text updates.

### Backend Tool Rendering
- The server registers the `create_plan` and `update_plan_step` tools.
- `AgenticUIAgent` intercepts tool results and emits `DataContent` state events using `application/json` (snapshot) and `application/json-patch+json` (delta) media types.
- The client renders these state events as formatted JSON in the chat transcript.

### Shared State
- The sample demonstrates server-originated state snapshots and deltas for plan data.
- There is no client-to-server state mutation in this sample; state is driven entirely by tool results.

## References
- AG-UI integration with Agent Framework: https://learn.microsoft.com/en-us/agent-framework/integrations/ag-ui/
- AG-UI protocol introduction: https://docs.ag-ui.com/introduction
